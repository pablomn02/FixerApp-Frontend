<ion-header>
  <ion-toolbar>
    <ion-title>Solicitudes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="solicitudes-content">
  <!-- Filtro de Estados -->
  <ion-segment [(ngModel)]="filtroEstado" (ionChange)="filtrarSolicitudes()">
    <ion-segment-button value="pendientes">
      <ion-label>Pendientes</ion-label>
    </ion-segment-button>
    <ion-segment-button value="aceptadas">
      <ion-label>Aceptadas</ion-label>
    </ion-segment-button>
    <ion-segment-button value="rechazadas">
      <ion-label>Rechazadas</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Lista de Solicitudes -->
  <ion-list class="solicitudes-list">
    <ion-item *ngFor="let solicitud of solicitudesFiltradas" class="solicitud-item">
      <ion-label>
        <h2>{{ solicitud.clienteNombre }}</h2>
        <p><strong>Servicio:</strong> {{ solicitud.servicio }}</p>
        <p><strong>Fecha y Hora:</strong> {{ solicitud.fechaHora }}</p>
        <p *ngIf="solicitud.mensaje"><strong>Mensaje:</strong> {{ solicitud.mensaje }}</p>
        <p><strong>Estado:</strong> {{ solicitud.estado | titlecase }}</p>
      </ion-label>
      <div slot="end" class="acciones" *ngIf="solicitud.estado === 'pendiente'">
        <ion-button fill="solid" color="success" (click)="aceptarSolicitud(solicitud)">
          Aceptar
        </ion-button>
        <ion-button fill="outline" color="danger" (click)="rechazarSolicitud(solicitud)">
          Rechazar
        </ion-button>
      </div>
    </ion-item>
  </ion-list>

  <!-- Mensaje si no hay solicitudes -->
  <div class="no-solicitudes" *ngIf="solicitudesFiltradas.length === 0">
    <p>No hay solicitudes {{ filtroEstado }} en este momento.</p>
  </div>
</ion-content>